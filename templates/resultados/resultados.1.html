<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRL Chart</title>
    <link rel="stylesheet" href="/static/css/styles_resultados.css">
</head>
<body>

    <div class="header">
        <div class="title-container">
            <h1>RESULTADOS</h1>
        </div>
    </div>

    {%if data.TRL != 'none' %}
        <h2>El TRL de su proyecto es: {{data.TRL}} </h2>
    {%endif%}

    {%if data.phase != 'none' %}
        <h2>Usted se encuentra en un {{data.TRL}}. Por lo tanto, está en una fase de {{data.phase}}</h2>
    {%else%}
        <h2>Los resultados de su proyecto no alcanza algún nivel de TRL.</h2>
    {%endif%}
    <h3>Alternativas seleccionadas:</h3>
    <ul>
        {%if data.answers == "No ha seleccionado ninguna opción" %}
        <li>{{data.answers}}</li>
        {%else%}
            {%for answer in data.answers%}
                <li> {{answer}} </li>
            {%endfor%}
        {%endif%}
    </ul>
    
    <!-- Barra -->

    <div id="containerProgressBar">
        <div class="boxProgressBar">
            <div class="progressBar-titles">
                <div class="title-progressBar" id="title1">
                    <p >Investigación Básica</p>
                </div>
                <div class="title-progressBar" id="title2">
                    <p >Investigación Aplicada</p>
                </div>
                <div class="title-progressBar" id="title3">
                    <p >Desarrollo Tecnológico</p>
                </div>
                <div class="title-progressBar" id="title4">
                    <p >Innovación</p>
                </div>
            </div>
            <div class="progressBar-circles">
            </div>
            <div class="progressBar-separators">
                <div class="separators" id="separator1"></div>
                <div class="separators" id="separator2"></div>
                <div class="separators" id="separator3"></div>
            </div>
        </div>
    </div>

    <figure class="highcharts-figure">
        <div id="spyderChart"></div>
    </figure>
    <figure class="highcharts-figure">
        <div id="spyderChart2"></div>
    </figure>

    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <script src="https://code.highcharts.com/modules/xrange.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>

    <script src="{{ url_for('static', filename='js/highcharts/highcharts.js') }}"></script>
    <script>

        document.addEventListener('DOMContentLoaded',function () {
            var trlLevel = "{{ data['TRL'] }}";
            var trlIndex = parseInt(trlLevel.replace('TRL', ''));

            const elementsTrl = [
                {trlNumber : 1,trlLabel : 'TRL1',  phaseLabel : 'Investigación Básica', colorCircle : '#0077b6'},

                {trlNumber : 2,trlLabel : 'TRL2',  phaseLabel : 'Investigación Aplicada', colorCircle: "#0096c7"},
                {trlNumber : 3,trlLabel : 'TRL3',  phaseLabel : 'Investigación Aplicada', colorCircle: "#0096c7"},
                {trlNumber : 4,trlLabel : 'TRL4',  phaseLabel : 'Investigación Aplicada', colorCircle: "#0096c7"},

                {trlNumber : 5,trlLabel : 'TRL5',  phaseLabel : 'Desarrollo Tecnológico', colorCircle: "#48cae4"},
                {trlNumber : 6,trlLabel : 'TRL6',  phaseLabel : 'Desarrollo Tecnológico', colorCircle: "#48cae4"},
                {trlNumber : 7,trlLabel : 'TRL7',  phaseLabel : 'Desarrollo Tecnológico', colorCircle: "#48cae4"},

                {trlNumber : 8,trlLabel : 'TRL8',  phaseLabel : 'Innovación', colorCircle : "#ade8f4"},
                {trlNumber : 9,trlLabel : 'TRL9',  phaseLabel : 'Innovación', colorCircle : "#ade8f4"},
            ]

            const progressBar = document.querySelector(".progressBar-circles");

            const historyPhase = [];
            elementsTrl.forEach((val, index)=>{
                const circle = document.createElement('div');
                circle.classList.add('progressBar-circle');
                if (val.trlNumber <= trlIndex) {
                    circle.style.backgroundColor=val.colorCircle;
                }else{
                    circle.style.opacity=0.5
                }
                
                const labelTrl = document.createElement('p');
                labelTrl.textContent = val.trlLabel
                labelTrl.classList.add('label-circle');
                
                circle.appendChild(labelTrl);

                progressBar.appendChild(circle);
            })

        })
    </script>
</body>

</html>